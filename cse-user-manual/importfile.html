<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space:pre}</style>
  <link rel="stylesheet" href="css/base.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">CSE User's Manual</h1>
<h1 class="subtitle">California Simulation Engine</h1>
<ul class="nav-bar">
  <li><a href="exportcol.html">&larr; Previous</a></li>
  <li><a href="../index.html">&uarr; Top &uarr;</a></li>
  <li><a href="index.html">&lt;&lt; Contents &gt;&gt;</a></li>
  <li><a href="output-reports.html">Next &rarr;</a></li>
</ul>
</header>
<div id="main-content">
<h1 id="importfile">4.39 IMPORTFILE</h1><p>IMPORTFILE allows specification of a file from which external data can be accessed using the <a href="input-structure.html#import">import()</a> and <a href="input-structure.html#importstr">importStr()</a> functions. This allows external values to be referenced in expressions. Any number of IMPORTFILEs can be defined and any number of import()/importStr() references can be made to a give IMPORTFILE.</p><p>Import files are text files containing an optional header and comma-separated data fields. With the header present, the structure of an import file matches that of an <a href="export.html#export">EXPORT</a> file. This makes it convenient to import unmodified files EXPORTed from prior runs. The file structure is as follows (noting that the header in lines 1-4 should not be present when imHeader=NO) –</p><table><thead><tr class="header"><th style="text-align:left">Line</th><th style="text-align:left">Contents</th><th style="text-align:left">Notes</th></tr></thead><tbody><tr class="odd"><td style="text-align:left">1</td><td style="text-align:left"><em>runTitle</em>, <em>runNumber</em></td><td style="text-align:left">read but not checked</td></tr><tr class="even"><td style="text-align:left">2</td><td style="text-align:left"><em>timestamp</em></td><td style="text-align:left">in quotes, read but not checked</td></tr><tr class="odd"><td style="text-align:left">3</td><td style="text-align:left"><em>title</em>, <em>freq</em></td><td style="text-align:left">should match imTitle and imFreq</td></tr><tr class="even"><td style="text-align:left">4</td><td style="text-align:left"><em>colName1</em>,<em>colName2</em>,…</td><td style="text-align:left">comma separated column names in quotes</td></tr><tr class="odd"><td style="text-align:left">5 ..</td><td style="text-align:left"><em>val1</em>,<em>val2</em>,…</td><td style="text-align:left">comma separated values (string values in quotes)</td></tr></tbody></table><p>Example import file imp1.csv</p><pre><code>    &quot;Test run&quot;,001
    &quot;Fri 04-Nov-16  10:54:37 am&quot;
    &quot;Daily Data&quot;,&quot;Day&quot;
    &quot;Mon&quot;,&quot;Day&quot;,&quot;Tdb&quot;,&quot;Twb&quot;
    1,1,62.2263,53.2278
    1,2,61.3115,52.8527
    1,3,60.4496,52.4993
    1,4,60.2499,52.4174
    1,5,60.9919,52.7216
    1,6,61.295,52.8459
    1,7,62.3178,53.2654
    1,8,62.8282,53.4747
    (... continues for 365 data lines ...)</code></pre><p>Example IMPORTFILE use (reading from imp1.csv)</p><pre><code>    // ... various input statements ...

    IMPORTFILE Example imFileName=&quot;imp1.csv&quot; imFreq=Day imTitle=&quot;Daily Data&quot;
    ...
    // Compute internal gain based on temperature read from import file.
    // result is 3000 W per degree temperature is above 60.
    // Note gnPower can have hourly variability, but here varies daily.
    GAIN gnPower = 3000 * max( 0, import(Example,&quot;Tdb&quot;) - 60) / 3.412
    ...</code></pre><p>Notes</p><ul><li>As usual, file order is not important – IMPORTFILEs can be referenced before they are defined.</li><li>Columns are referenced by 1-based index or column names (assuming file header is present). In the example above, “Tdb” could be replaced by 3.</li></ul><p><strong>imName</strong></p><p>Name of IMPORTFILE object (for reference from Import()).</p><table><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th style="text-align:left"><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left"><em>63 characters</em></td><td style="text-align:left"></td><td style="text-align:left">No</td><td style="text-align:left">constant</td></tr></tbody></table><p><strong>imFileName=<em>string</em></strong></p><p>Gives path name of file to be read. If directory is specified, CSE first looks for the file the current directory and searches include paths specified by the -I command line parameter (if any).</p><table><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th style="text-align:left"><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left"><em>file name, path optional</em></td><td style="text-align:left"></td><td style="text-align:left">Yes</td><td style="text-align:left">constant</td></tr></tbody></table><p><strong>imTitle=<em>string</em></strong></p><p>Title expected to be found on line 3 of the import file. A warning is issued if a non-blank imTitle does not match the import file title.</p><table><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th style="text-align:left"><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">Text string</td><td style="text-align:left">(blank)</td><td style="text-align:left">No</td><td style="text-align:left">constant</td></tr></tbody></table><p><strong>imFreq=<em>choice</em></strong></p><p>Specifies the interval at which CSE reads from the import file. Data is read at the beginning of the indicated interval and buffered in memory for access in expressions via import() or importStr().</p><table><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th style="text-align:left"><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">YEAR, MONTH, DAY, or HOUR</td><td style="text-align:left"></td><td style="text-align:left">Yes</td><td style="text-align:left">constant</td></tr></tbody></table><p><strong>imHeader=<em>choice</em></strong></p><p>Indicates whether the import file include a 4 line header, as described above. If NO, the import file should contain only comma-separated data rows and data items can be referenced only by 1-based column number.</p><table><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th style="text-align:left"><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">YES NO</td><td style="text-align:left">YES</td><td style="text-align:left">No</td><td style="text-align:left">constant</td></tr></tbody></table><p><strong>endImportFile</strong></p><p>Optionally indicates the end of the import file definition. Alternatively, the end of the import file definition can be indicated by END or by beginning another object.</p><table><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th style="text-align:left"><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"><em>N/A</em></td><td style="text-align:left">No</td><td style="text-align:left">constant</td></tr></tbody></table>
</div>
<p class="footer">Copyright (c) 1997-2017 The CSE Authors. All rights reserved.<br>Generated: 2017-04-26T16:07:32-06:00</p>
</body>
</html>
