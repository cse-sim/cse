<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=yes">
  <title></title>
  <style type="text/css">code{white-space:pre}</style>
  <link rel="stylesheet" href="css/base.css">
  <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">CSE User's Manual</h1>
<h1 class="subtitle">California Simulation Engine</h1>
<ul class="nav-bar">
  <li><a href="shadex.html">&larr; Previous</a></li>
  <li><a href="../index.html">&uarr; Top &uarr;</a></li>
  <li><a href="index.html">&lt;&lt; Contents &gt;&gt;</a></li>
  <li><a href="airhandler.html">Next &rarr;</a></li>
</ul>
</header>
<div id="main-content">
<h1 id="battery">4.46 BATTERY</h1><p>BATTERY describes input data for a model of an energy-storage system which is not tied to any specific energy storage technology. The battery model integrates the energy added and removed (accounting for efficiency losses). Note: although we use the term battery, the underlying model is flexible enough to model any energy storage system.</p><p>The modeler can set limits and constraints on capacities and flows and the associated efficiencies for this model.</p><p><strong>btName</strong></p><p>Name of the battery system. Given after the word BATTERY.</p><table style="width:90%"><colgroup><col style="width:16%"><col style="width:18%"><col style="width:16%"><col style="width:18%"><col style="width:20%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th><strong>Default</strong></th><th><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">63 characters*</td><td><em>none</em></td><td>No</td><td>constant</td></tr></tbody></table><p><strong>btMeter=<em>choice</em></strong></p><p>Name of a <a href="meter.html#meter">METER</a> to which the BATTERY’s charge/discharge energy flows are recorded. Battery energy flows are accumulated to meter end use “BT”. Battery energy flows are seen from the standpoint of a “load” on the electric grid, so charges to the BATTERY system are positive values while discharges from the BATTERY system are negative values.</p><p>Note btMeter also determines the source for the probe value <em>loadSeen</em>. See discussion and example under btChgReq (below).</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">meter name</td><td style="text-align:left"><em>none</em></td><td style="text-align:left">No</td><td>constant</td></tr></tbody></table><p><strong>btChgEff=<em>float</em></strong></p><p>The charging efficiency of storing electricity into the BATTERY system. A value of 1.0 means that no energy is lost and 100% of charge energy enters and is stored in the battery.</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">0 &lt; x <span class="math inline">\(\le\)</span> 1</td><td style="text-align:left">0.975</td><td style="text-align:left">No</td><td>hourly</td></tr></tbody></table><p><strong>btDschgEff=<em>float</em></strong></p><p>The discharge efficiency for when the BATTERY system is discharging power. A value of 1.0 means that no energy is lost and 100% of discharge energy leaves the system.</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">0 &lt; x <span class="math inline">\(\le\)</span> 1</td><td style="text-align:left">0.975</td><td style="text-align:left">No</td><td>hourly</td></tr></tbody></table><p><strong>btMaxCap=<em>float</em></strong></p><p>This is the maximum amount of energy that can be stored in the BATTERY system in kilowatt-hours. Once the BATTERY has reached its maximum capacity, no additional energy will be stored.</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left">kWh</td><td style="text-align:left">x <span class="math inline">\(\ge\)</span> 0</td><td style="text-align:left">16</td><td style="text-align:left">No</td><td>constant</td></tr></tbody></table><p><strong>btInitSOE=<em>float</em></strong></p><p>The initial state of energy of the BATTERY system as a fraction of the total capacity. If <code>btInitSOE</code> is specified, the battery state-of-energy at the beginning of the actual simulation will be set to the amount specified, regardless of whether there was a warm-up period or not. If <code>btInitSOE</code> is NOT specififed, it will default to 1.0 (i.e., 100%) at the beginning of the warmup period (if any).</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">0 <span class="math inline">\(\le\)</span> x <span class="math inline">\(\le\)</span> 0</td><td style="text-align:left">1.0</td><td style="text-align:left">No</td><td>constant</td></tr></tbody></table><p><strong>btInitCycles=<em>int</em></strong></p><p>The number of cycles on the battery at the beginning of the run.</p><table style="width:89%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:20%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th><strong>Default</strong></th><th><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left">number of cycles</td><td style="text-align:left">x <span class="math inline">\(\ge\)</span> 0</td><td>0</td><td>No</td><td>runly</td></tr></tbody></table><p><strong>btMaxChgPwr=<em>float</em></strong></p><p>The maximum rate at which the BATTERY can be charged in kilowatts (i.e., energy flowing <em>into</em> the BATTERY).</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left">kW</td><td style="text-align:left">x <span class="math inline">\(\ge\)</span> 0</td><td style="text-align:left">4</td><td style="text-align:left">No</td><td>hourly</td></tr></tbody></table><p><strong>btMaxDschgPwr=<em>float</em></strong></p><p>The maximum rate at which the BATTERY can be discharged in kilowatts (i.e., energy flowing <em>out of</em> the BATTERY).</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left">kW</td><td style="text-align:left">x <span class="math inline">\(\ge\)</span> 0</td><td style="text-align:left">4</td><td style="text-align:left">No</td><td>hourly</td></tr></tbody></table><p><strong>btControlAlg=<em>choice</em></strong></p><p>Selects charge/discharge control algorithm. btChgReq (next) specifies the desired battery charge or discharge rate. btControlAlg allows selection of alternative algorithms for deriving btChgReq.</p><table style="width:93%"><colgroup><col style="width:18%"><col style="width:75%"></colgroup><tbody><tr class="odd"><td style="text-align:left">DEFAULT</td><td style="text-align:left">btChgReq is used as input or defaulted (see below)</td></tr><tr class="even"><td style="text-align:left">TDVPEAKSAVE</td><td style="text-align:left">btChgReq input (if any) is ignored. Instead, a California-specific algorithm is used that saves battery charge until peak TDV (Time Dependant Valuation) hours of the day, shifting energy generated on site (e.g. PV) to supply feed the grid during critical periods. The algorithm requires availability of hourly TDV data, see Top.tdvFName.</td></tr></tbody></table><p>Note btControlAlg has hourly variability, allowing dynamic algorithm selection. In California compliance applications, TDVPEAKSAVE is typically used only on days with high TDV peaks.</p><table style="width:90%"><colgroup><col style="width:16%"><col style="width:18%"><col style="width:16%"><col style="width:18%"><col style="width:20%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th><strong>Default</strong></th><th><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left">DEFAULT or TDVPEAKSAVE</td><td>DEFAULT</td><td>No</td><td>hourly</td></tr></tbody></table><p><strong>btChgReq=<em>float</em></strong></p><p>The power request to charge (or discharge if negative) the battery. If omitted, the default strategy is used (attempt to satisfy all loads and absorb all available excess power). btChgReq and the default strategy requested power are literally <em>requests</em>: that is, more power will not be delivered than is available; more power will not be absorbed than capacity exits to store; and the battery’s power limits will be respected.</p><p>btChgReq can be set by an expression to allow complex energy management/dispatch strategies. These approaches typically involve the BATTERY probe value <em>loadSeen</em>, which is the net electricity use (not including the battery) on the meter specified by btMeter (above). When loadSeen is positive, electricity input (e.g. from the grid) is required; when negative, excess electrical energy is available from photovoltaic generation. loadSeen can be used in btChgReq expressions such as –</p><pre><code>btChgReq = select(
    $hour&gt;=9 &amp;&amp; $hour&lt;=20,-min(@BATTERY[ 1].loadSeen, 0), // hrs 9 - 20: charge when surplus energy
    default -max( @BATTERY[ 1].loadSeen, 0))              // else: discharge when energy is required</code></pre><p>The sign conventions here are tricky. min(<span class="citation" data-cites="BATTERY">@BATTERY [ 1]</span>.loadSeen, 0) produces a value &lt;=0 that is the negative of the amount of surplus energy available. A positive btChgReq value requests charging, hence “-” (minus sign) in front of the min(). Conversely, max( <span class="citation" data-cites="BATTERY">@BATTERY [ 1]</span>.loadSeen, 0) results in a value &gt;= 0 indicating the net energy needed by the building. To request discharge, btChgReq must be negative, so “-” is also needed in the discharge expression. (The <span class="citation" data-cites="BATTERY">@BATTERY [1]</span> references mean “this battery”, assuming there is only one battery being modelled. In multi-battery situations, the current BATTERY’s index or name must be included within the “[ ]”.)</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left">kW</td><td style="text-align:left"></td><td style="text-align:left">btMeter net load</td><td style="text-align:left">No</td><td>hourly</td></tr></tbody></table><p><strong>btUseUsrChg=<em>choice</em></strong></p><p>Former yes/no choice that currently has no effect. Deprecated, will be removed in a future version.</p><p><strong>endBATTERY</strong></p><p>Optionally indicates the end of the BATTERY definition. Alternatively, the end of the definition can be indicated by END or by beginning another object.</p><table style="width:96%"><colgroup><col style="width:16%"><col style="width:16%"><col style="width:18%"><col style="width:22%"><col style="width:22%"></colgroup><thead><tr class="header"><th style="text-align:left"><strong>Units</strong></th><th style="text-align:left"><strong>Legal</strong> <strong>Range</strong></th><th style="text-align:left"><strong>Default</strong></th><th style="text-align:left"><strong>Required</strong></th><th><strong>Variability</strong></th></tr></thead><tbody><tr class="odd"><td style="text-align:left"></td><td style="text-align:left"></td><td style="text-align:left"><em>none</em></td><td style="text-align:left">No</td><td>constant</td></tr></tbody></table><p><strong>Related Probes:</strong></p><ul><li>@<a href="probe_battery.html#p_battery">battery</a></li></ul>
</div>
<p class="footer">Copyright (c) 1997-2025 The CSE Authors. All rights reserved.<br>Generated: 2025-03-12T18:09:06+00:00</p>
</body>
</html>
